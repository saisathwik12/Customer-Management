{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\Hp\\\\Desktop\\\\Customer Management\\\\consumer_frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../customer.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/addresses/address.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction CustomerListComponent_tr_17_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction CustomerListComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtemplate(6, CustomerListComponent_tr_17_ng_container_6_Template, 1, 0, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelementStart(8, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_tr_17_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const c_r3 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.editCustomer(c_r3.id);\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_tr_17_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const c_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteCustomer(c_r3.id);\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r3 = ctx.$implicit;\n    i0.ɵɵnextContext();\n\n    const _r1 = i0.ɵɵreference(20);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r3.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1);\n  }\n}\n\nfunction CustomerListComponent_ng_template_19_Template(rf, ctx) {}\n\nexport class CustomerListComponent {\n  constructor(service, toastr, router, addressServcice) {\n    this.service = service;\n    this.toastr = toastr;\n    this.router = router;\n    this.addressServcice = addressServcice;\n    this.customers = [];\n    this.addresses = [];\n  }\n\n  ngOnInit() {\n    this.loadCustomers();\n  }\n\n  loadCustomers() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b;\n\n      try {\n        const res = yield _this.service.getCustomers();\n        _this.customers = res.data;\n      } catch (err) {\n        _this.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Failed to load customers');\n      }\n    })();\n  }\n\n  loadAddresses() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b;\n\n      try {\n        const res = yield _this2.service.getAddresses(_this2.customerId);\n        _this2.addresses = res.data;\n      } catch (err) {\n        _this2.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Failed to load addresses');\n      }\n    })();\n  }\n\n  editCustomer(id) {\n    this.router.navigate([`/customers/edit/${id}`]);\n  }\n\n  deleteCustomer(id) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b;\n\n      if (!confirm('Are you sure to delete?')) return;\n\n      try {\n        yield _this3.service.deleteCustomer(id);\n\n        _this3.toastr.success('Customer deleted');\n\n        _this3.loadCustomers();\n      } catch (err) {\n        _this3.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Delete failed');\n      }\n    })();\n  }\n\n}\n\nCustomerListComponent.ɵfac = function CustomerListComponent_Factory(t) {\n  return new (t || CustomerListComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AddressService));\n};\n\nCustomerListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomerListComponent,\n  selectors: [[\"app-customer-list\"]],\n  decls: 21,\n  vars: 1,\n  consts: [[1, \"container\", \"mt-4\"], [\"routerLink\", \"/customers/add\", 1, \"btn\", \"btn-success\", \"mb-2\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"Address\", \"\"], [4, \"ngTemplateOutlet\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"]],\n  template: function CustomerListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"h2\");\n      i0.ɵɵtext(2, \"Customers\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"a\", 1);\n      i0.ɵɵtext(4, \"Add Customer\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"table\", 2);\n      i0.ɵɵelementStart(6, \"thead\");\n      i0.ɵɵelementStart(7, \"tr\");\n      i0.ɵɵelementStart(8, \"th\");\n      i0.ɵɵtext(9, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Phone\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\");\n      i0.ɵɵtext(13, \"Address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"Actions\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"tbody\");\n      i0.ɵɵtemplate(17, CustomerListComponent_tr_17_Template, 12, 3, \"tr\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\");\n      i0.ɵɵtemplate(19, CustomerListComponent_ng_template_19_Template, 0, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n    }\n  },\n  directives: [i3.RouterLinkWithHref, i5.NgForOf, i5.NgTemplateOutlet],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXN0b21lci1saXN0LmNvbXBvbmVudC5zY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/Hp/Desktop/Customer Management/consumer_frontend/src/app/customers/customer-list/customer-list.component.ts"],"names":["i0","i1","i2","i3","i4","i5","CustomerListComponent_tr_17_ng_container_6_Template","rf","ctx","ɵɵelementContainer","CustomerListComponent_tr_17_Template","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","ɵɵlistener","CustomerListComponent_tr_17_Template_button_click_8_listener","restoredCtx","ɵɵrestoreView","c_r3","$implicit","ctx_r5","ɵɵnextContext","editCustomer","id","CustomerListComponent_tr_17_Template_button_click_10_listener","ctx_r7","deleteCustomer","_r1","ɵɵreference","ɵɵadvance","ɵɵtextInterpolate","name","phone","ɵɵproperty","CustomerListComponent_ng_template_19_Template","CustomerListComponent","constructor","service","toastr","router","addressServcice","customers","addresses","ngOnInit","loadCustomers","_a","_b","res","getCustomers","data","err","error","response","message","loadAddresses","getAddresses","customerId","navigate","confirm","success","ɵfac","CustomerListComponent_Factory","t","ɵɵdirectiveInject","CustomerService","ToastrService","Router","AddressService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CustomerListComponent_Template","ɵɵtemplateRefExtractor","directives","RouterLinkWithHref","NgForOf","NgTemplateOutlet","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../customer.service\";\r\nimport * as i2 from \"ngx-toastr\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"src/app/addresses/address.service\";\r\nimport * as i5 from \"@angular/common\";\r\nfunction CustomerListComponent_tr_17_ng_container_6_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainer(0);\r\n} }\r\nfunction CustomerListComponent_tr_17_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\");\r\n    i0.ɵɵelementStart(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtemplate(6, CustomerListComponent_tr_17_ng_container_6_Template, 1, 0, \"ng-container\", 5);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"td\");\r\n    i0.ɵɵelementStart(8, \"button\", 6);\r\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_tr_17_Template_button_click_8_listener() { const restoredCtx = i0.ɵɵrestoreView(_r6); const c_r3 = restoredCtx.$implicit; const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.editCustomer(c_r3.id); });\r\n    i0.ɵɵtext(9, \"Edit\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(10, \"button\", 7);\r\n    i0.ɵɵlistener(\"click\", function CustomerListComponent_tr_17_Template_button_click_10_listener() { const restoredCtx = i0.ɵɵrestoreView(_r6); const c_r3 = restoredCtx.$implicit; const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.deleteCustomer(c_r3.id); });\r\n    i0.ɵɵtext(11, \"Delete\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const c_r3 = ctx.$implicit;\r\n    i0.ɵɵnextContext();\r\n    const _r1 = i0.ɵɵreference(20);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(c_r3.name);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(c_r3.phone);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1);\r\n} }\r\nfunction CustomerListComponent_ng_template_19_Template(rf, ctx) { }\r\nexport class CustomerListComponent {\r\n    constructor(service, toastr, router, addressServcice) {\r\n        this.service = service;\r\n        this.toastr = toastr;\r\n        this.router = router;\r\n        this.addressServcice = addressServcice;\r\n        this.customers = [];\r\n        this.addresses = [];\r\n    }\r\n    ngOnInit() {\r\n        this.loadCustomers();\r\n    }\r\n    async loadCustomers() {\r\n        var _a, _b;\r\n        try {\r\n            const res = await this.service.getCustomers();\r\n            this.customers = res.data;\r\n        }\r\n        catch (err) {\r\n            this.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Failed to load customers');\r\n        }\r\n    }\r\n    async loadAddresses() {\r\n        var _a, _b;\r\n        try {\r\n            const res = await this.service.getAddresses(this.customerId);\r\n            this.addresses = res.data;\r\n        }\r\n        catch (err) {\r\n            this.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Failed to load addresses');\r\n        }\r\n    }\r\n    editCustomer(id) {\r\n        this.router.navigate([`/customers/edit/${id}`]);\r\n    }\r\n    async deleteCustomer(id) {\r\n        var _a, _b;\r\n        if (!confirm('Are you sure to delete?'))\r\n            return;\r\n        try {\r\n            await this.service.deleteCustomer(id);\r\n            this.toastr.success('Customer deleted');\r\n            this.loadCustomers();\r\n        }\r\n        catch (err) {\r\n            this.toastr.error(((_b = (_a = err.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || 'Delete failed');\r\n        }\r\n    }\r\n}\r\nCustomerListComponent.ɵfac = function CustomerListComponent_Factory(t) { return new (t || CustomerListComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AddressService)); };\r\nCustomerListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CustomerListComponent, selectors: [[\"app-customer-list\"]], decls: 21, vars: 1, consts: [[1, \"container\", \"mt-4\"], [\"routerLink\", \"/customers/add\", 1, \"btn\", \"btn-success\", \"mb-2\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"Address\", \"\"], [4, \"ngTemplateOutlet\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"]], template: function CustomerListComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"h2\");\r\n        i0.ɵɵtext(2, \"Customers\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"a\", 1);\r\n        i0.ɵɵtext(4, \"Add Customer\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"table\", 2);\r\n        i0.ɵɵelementStart(6, \"thead\");\r\n        i0.ɵɵelementStart(7, \"tr\");\r\n        i0.ɵɵelementStart(8, \"th\");\r\n        i0.ɵɵtext(9, \"Name\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(10, \"th\");\r\n        i0.ɵɵtext(11, \"Phone\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(12, \"th\");\r\n        i0.ɵɵtext(13, \"Address\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"th\");\r\n        i0.ɵɵtext(15, \"Actions\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(16, \"tbody\");\r\n        i0.ɵɵtemplate(17, CustomerListComponent_tr_17_Template, 12, 3, \"tr\", 3);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(18, \"div\");\r\n        i0.ɵɵtemplate(19, CustomerListComponent_ng_template_19_Template, 0, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(17);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.customers);\r\n    } }, directives: [i3.RouterLinkWithHref, i5.NgForOf, i5.NgTemplateOutlet], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXN0b21lci1saXN0LmNvbXBvbmVudC5zY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}